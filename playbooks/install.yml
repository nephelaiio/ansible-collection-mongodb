---
- name: Deploy config cluster
  ansible.builtin.import_playbook: nephelaiio.mongodb.config

- name: Deploy shard1 cluster
  ansible.builtin.import_playbook: nephelaiio.mongodb.shard
  vars:
    mongos_replicaset_shard_name: "{{ mongodb_shard1_name | default('shard1') }}"
    mongodb_shard: "{{ mongodb_shard1_group | default('mongodb_shard1') }}"

- name: Deploy mongos servers
  ansible.builtin.import_playbook: nephelaiio.mongodb.mongos
  vars:
    mongodb_shard_clusters:
      - name: "{{ mongodb_shard1_name | default('shard1') }}"
        group: "{{ mongodb_shard1_group | default('mongodb_shard1') }}"
